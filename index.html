<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Unity WebGL Player | Runner</title>
  <link rel="shortcut icon" href="TemplateData/favicon.ico">
  <link rel="stylesheet" href="TemplateData/style.css">
  <style>
    @media only screen and (max-width: 767px) {
      #unity-container.unity-mobile {
        transform-origin: center top;
        transform: rotate(-90deg);
        margin-top: calc((100vw - 100vh) / 2);
        margin-left: calc((100vh - 100vw) / 2);
      }
      #unity-canvas.unity-mobile {
        width: 100vh;
        height: 100vw;
      }
      #rotate-message {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background-color: rgba(0, 0, 0, 0.8);
        color: white;
        font-size: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        z-index: 999;
      }
    }
  </style>
</head>
<body>
  <div id="unity-container" class="unity-desktop">
    <canvas id="unity-canvas" width="1024" height="432"></canvas>
    <div id="unity-loading-bar">
      <div id="unity-logo"></div>
      <div id="unity-progress-bar-empty">
        <div id="unity-progress-bar-full"></div>
      </div>
    </div>
    <div id="unity-warning"></div>
    <div id="unity-footer">
      <div id="unity-webgl-logo"></div>
      <div id="unity-fullscreen-button"></div>
      <div id="unity-build-title">Runner</div>
    </div>
  </div>
  <div id="rotate-message" style="display:none;">
    <p>Please rotate your device to landscape mode to play the game.</p>
  </div>
  <script>
    var container = document.querySelector("#unity-container");
    var canvas = document.querySelector("#unity-canvas");
    var loadingBar = document.querySelector("#unity-loading-bar");
    var progressBarFull = document.querySelector("#unity-progress-bar-full");
    var fullscreenButton = document.querySelector("#unity-fullscreen-button");
    var warningBanner = document.querySelector("#unity-warning");

    var buildUrl = "Build";
    var loaderUrl = buildUrl + "/Flappy Peach.loader.js";
    var config = {
      dataUrl: buildUrl + "/Flappy Peach.data",
      frameworkUrl: buildUrl + "/Flappy Peach.framework.js",
      codeUrl: buildUrl + "/Flappy Peach.wasm",
      streamingAssetsUrl: "StreamingAssets",
      companyName: "DefaultCompany",
      productName: "Runner",
      productVersion: "1.8",
    };

    if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
      // Mobile device style: fill the whole browser client area with the game canvas:
      var screenWidth = window.innerWidth;
      var screenHeight = window.innerHeight;
      var canvasWidth = screenWidth;
      var canvasHeight = screenHeight;

      // Adjust canvas size based on screen size
      if (screenWidth > screenHeight) {
        // Landscape Rotation
      canvasWidth = Math.floor(screenHeight * 16 / 9);
      canvasHeight = screenHeight;
      } else {
      // Portrait orientation
      canvasWidth = screenWidth;
      canvasHeight = Math.floor(screenWidth * 9 / 16);
      }
        canvas.style.width = canvasWidth + 'px';
  canvas.style.height = canvasHeight + 'px';

  // Adjust device pixel ratio for performance
  config.devicePixelRatio = window.devicePixelRatio > 2 ? 2 : window.devicePixelRatio;

  container.className = "unity-mobile";
  canvas.className = "unity-mobile";

  unityShowBanner('WebGL builds are not supported on mobile devices.');
} else {
  // Desktop style: Render the game canvas in a window that can be maximized to fullscreen:
  canvas.style.width = "100%";
  canvas.style.height = "100%";
}

loadingBar.style.display = "block";

var script = document.createElement("script");
script.src = loaderUrl;
script.onload = () => {
  createUnityInstance(canvas, config, (progress) => {
    progressBarFull.style.width = 100 * progress + "%";
  }).then((unityInstance) => {
    loadingBar.style.display = "none";
    fullscreenButton.onclick = () => {
      unityInstance.SetFullscreen(1);
    };
  }).catch((message) => {
    alert(message);
  });
};
document.body.appendChild(script);

// Show rotation message for portrait mode
window.addEventListener("orientationchange", function() {
  if (window.orientation == 0 || window.orientation == 180) {
    // Portrait mode
    container.style.display = "none";
    document.getElementById("rotate-message").style.display = "flex";
  } else {
    // Landscape mode
    container.style.display = "block";
    document.getElementById("rotate-message").style.display = "none";
  }
});
</script> 
</body> 
</html>
